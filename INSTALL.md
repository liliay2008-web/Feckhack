# Инструкция по установке и запуску

## Требования

- Node.js (версия 18 или выше)
- npm (версия 9 или выше)

## Шаги установки

### 1. Клонирование репозитория (если нужно)

```bash
git clone <repository-url>
cd hack_second
```

### 2. Установка зависимостей

```bash
# Установка всех зависимостей
npm run install:all
```

Или вручную:

```bash
# Установка зависимостей корневого проекта
npm install

# Установка зависимостей фронтенда
cd frontend
npm install

# Установка зависимостей бекенда
cd ../backend
npm install
```

### 3. Настройка переменных окружения

Создайте файл `backend/.env`:

```env
PORT=3001
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=7d
```

**Важно:** В production измените `JWT_SECRET` на безопасный случайный ключ!

### 4. Запуск приложения

#### Вариант 1: Запуск всего приложения одновременно

```bash
npm run dev
```

Это запустит:
- Фронтенд на http://localhost:3000
- Бекенд на http://localhost:3001

#### Вариант 2: Запуск отдельно

**Терминал 1 - Фронтенд:**
```bash
cd frontend
npm run dev
```

**Терминал 2 - Бекенд:**
```bash
cd backend
npm run dev
```

### 5. Первый вход

1. Откройте браузер и перейдите на http://localhost:3000
2. Зарегистрируйтесь как администратор
3. После входа загрузите студентов и темы через соответствующие разделы

## Использование

### Для администратора:

1. **Загрузка студентов:**
   - Перейдите в раздел "Загрузка студентов"
   - Загрузите Excel/CSV файл со списком студентов
   - Файл должен содержать колонки: ФИО, Группа, Телефон (опционально)

2. **Загрузка тем:**
   - Перейдите в раздел "Загрузка тем"
   - Укажите Предмет, ЦМК, Тип работы (опционально)
   - Загрузите Excel/CSV файл со списком тем
   - Файл должен содержать колонки: Название темы, Руководитель (опционально)

3. **Распределение тем:**
   - Автоматическое: Нажмите "Авто-режим (рандом)" для автоматического распределения
   - Ручное: Включите "Ручной режим" и назначьте темы вручную

4. **Экспорт:**
   - Выберите тип экспорта (Полный список или Свободные темы)
   - Выберите формат (Excel, CSV или PDF)
   - При необходимости укажите фильтры (группа, руководитель, ЦМК)
   - Нажмите "Экспортировать"

### Для старосты:

1. **Просмотр тем:**
   - Перейдите в раздел "Просмотр тем"
   - Просмотрите список доступных тем
   - Используйте фильтры для поиска нужных тем

2. **Распределение тем:**
   - Перейдите в раздел "Распределение тем"
   - Выберите свободную тему
   - Назначьте её студенту из вашей группы
   - Заполните все необходимые данные
   - **Важно:** После выбора темы у вас есть 30 минут на заполнение всех полей

3. **Экспорт:**
   - Экспортируйте список назначенных тем для вашей группы

## Устранение неполадок

### Проблема: База данных не создается

**Решение:** Убедитесь, что у вас есть права на запись в директорию `backend/database/`

### Проблема: Порт уже занят

**Решение:** Измените порт в файле `backend/.env` (для бекенда) или `frontend/vite.config.js` (для фронтенда)

### Проблема: Ошибка при загрузке файлов

**Решение:** Убедитесь, что директория `backend/uploads/` существует и доступна для записи

### Проблема: CORS ошибки

**Решение:** Убедитесь, что бекенд запущен на порту 3001, а фронтенд на порту 3000. Проверьте настройки прокси в `frontend/vite.config.js`

## Производственное развертывание

1. Соберите фронтенд:
```bash
cd frontend
npm run build
```

2. Настройте веб-сервер (Nginx, Apache) для обслуживания статических файлов из `frontend/dist/`

3. Настройте процесс-менеджер (PM2, systemd) для запуска бекенда:
```bash
cd backend
npm start
```

4. Используйте PostgreSQL вместо SQLite для production (требуются изменения в `backend/database/db.js`)

5. Настройте HTTPS и безопасные заголовки

6. Измените `JWT_SECRET` на безопасный случайный ключ

## Поддержка

При возникновении проблем создайте issue в репозитории проекта.
